{
	"info": {
		"_postman_id": "a1b2c3d4-e5f6-7890-abcd-ef1234567890",
		"name": "Mifumo WMS - SMS API (Beem Integration)",
		"description": "Complete SMS API collection for Mifumo WMS with Beem Africa integration. This collection includes all SMS endpoints for sending messages, managing sender IDs, templates, and monitoring delivery status.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "12345678"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Login",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"your-username\",\n    \"password\": \"your-password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/login/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"login",
								""
							]
						},
						"description": "Login to get JWT access token"
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refresh\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/auth/token/refresh/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"auth",
								"token",
								"refresh",
								""
							]
						},
						"description": "Refresh JWT access token"
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for JWT token management"
		},
		{
			"name": "SMS - Send Messages",
			"item": [
				{
					"name": "Send Single SMS",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"Hello from Mifumo WMS! This is a test message.\",\n    \"recipients\": [\n        \"255700000001\",\n        \"255700000002\"\n    ],\n    \"sender_id\": \"MIFUMO\",\n    \"encoding\": 0\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/send/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"send",
								""
							]
						},
						"description": "Send a single SMS message to one or more recipients. Sender ID must be registered and active."
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"message\": \"Hello from Mifumo WMS!\",\n    \"recipients\": [\"255700000001\"],\n    \"sender_id\": \"MIFUMO\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/messaging/sms/beem/send/",
									"host": ["{{base_url}}"],
									"path": ["api", "messaging", "sms", "beem", "send", ""]
								}
							},
							"status": "Created",
							"code": 201,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"message\": \"SMS sent successfully via Beem\",\n    \"data\": {\n        \"message_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n        \"base_message_id\": \"123e4567-e89b-12d3-a456-426614174001\",\n        \"provider\": \"beem\",\n        \"recipient_count\": 1,\n        \"cost_estimate\": 0.05,\n        \"status\": \"sent\",\n        \"beem_response\": {\n            \"success\": true,\n            \"provider\": \"beem\",\n            \"response\": {},\n            \"message_count\": 1,\n            \"cost_estimate\": 0.05\n        }\n    }\n}"
						}
					]
				},
				{
					"name": "Send Bulk SMS",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"messages\": [\n        {\n            \"message\": \"Welcome to Mifumo WMS! We're excited to have you.\",\n            \"recipients\": [\"255700000001\", \"255700000002\"],\n            \"sender_id\": \"MIFUMO\"\n        },\n        {\n            \"message\": \"Your account has been activated successfully.\",\n            \"recipients\": [\"255700000003\"],\n            \"sender_id\": \"MIFUMO\"\n        }\n    ]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/send-bulk/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"send-bulk",
								""
							]
						},
						"description": "Send multiple SMS messages in a single API call. Each message must have its own sender_id."
					},
					"response": []
				},
				{
					"name": "Send Scheduled SMS",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"This is a scheduled message from Mifumo WMS.\",\n    \"recipients\": [\"255700000001\"],\n    \"sender_id\": \"MIFUMO\",\n    \"schedule_time\": \"2024-12-25T10:00:00Z\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/send/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"send",
								""
							]
						},
						"description": "Send a scheduled SMS message for future delivery. Schedule time must be in the future."
					},
					"response": []
				}
			],
			"description": "Endpoints for sending SMS messages"
		},
		{
			"name": "SMS - Management",
			"item": [
				{
					"name": "Get SMS Messages",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/messages/?page=1&limit=20&status=sent",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"messages",
								""
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "20"
								},
								{
									"key": "status",
									"value": "sent"
								}
							]
						},
						"description": "Get list of SMS messages with optional filtering"
					},
					"response": []
				},
				{
					"name": "Get SMS Delivery Status",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/{{message_id}}/status/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"{{message_id}}",
								"status",
								""
							]
						},
						"description": "Get delivery status for a specific SMS message"
					},
					"response": []
				},
				{
					"name": "Get Delivery Reports",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/delivery-reports/?page=1&limit=20",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"delivery-reports",
								""
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "20"
								}
							]
						},
						"description": "Get SMS delivery reports"
					},
					"response": []
				}
			],
			"description": "SMS message management endpoints"
		},
		{
			"name": "SMS - Sender IDs",
			"item": [
				{
					"name": "Get Sender IDs",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/sender-ids/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"sender-ids",
								""
							]
						},
						"description": "Get list of registered sender IDs for the tenant"
					},
					"response": []
				},
				{
					"name": "Create Sender ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"sender_id\": \"YOURCOMPANY\",\n    \"sample_content\": \"Hello from Your Company! This is a sample message to demonstrate our SMS service.\",\n    \"provider\": \"beem\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/sender-ids/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"sender-ids",
								""
							]
						},
						"description": "Create a new sender ID for SMS sending"
					},
					"response": []
				},
				{
					"name": "Update Sender ID",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"status\": \"active\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/sender-ids/{{sender_id_uuid}}/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"sender-ids",
								"{{sender_id_uuid}}",
								""
							]
						},
						"description": "Update sender ID status or details"
					},
					"response": []
				}
			],
			"description": "Sender ID management endpoints"
		},
		{
			"name": "SMS - Templates",
			"item": [
				{
					"name": "Get SMS Templates",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/templates/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"templates",
								""
							]
						},
						"description": "Get list of SMS templates"
					},
					"response": []
				},
				{
					"name": "Create SMS Template",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Welcome Message\",\n    \"category\": \"TRANSACTIONAL\",\n    \"language\": \"en\",\n    \"message\": \"Welcome to Mifumo WMS, {{customer_name}}! Your account is now active.\",\n    \"variables\": [\"customer_name\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/templates/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"templates",
								""
							]
						},
						"description": "Create a new SMS template with variables"
					},
					"response": []
				},
				{
					"name": "Send SMS with Template",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"Welcome to Mifumo WMS, John Doe! Your account is now active.\",\n    \"recipients\": [\"255700000001\"],\n    \"sender_id\": \"MIFUMO\",\n    \"template_id\": \"{{template_id}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/send/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"send",
								""
							]
						},
						"description": "Send SMS using a template"
					},
					"response": []
				}
			],
			"description": "SMS template management endpoints"
		},
		{
			"name": "SMS - Utilities",
			"item": [
				{
					"name": "Test Beem Connection",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/test-connection/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"test-connection",
								""
							]
						},
						"description": "Test connection to Beem SMS API"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "GET",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									}
								],
								"url": {
									"raw": "{{base_url}}/api/messaging/sms/beem/test-connection/",
									"host": ["{{base_url}}"],
									"path": ["api", "messaging", "sms", "beem", "test-connection", ""]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"message\": \"Connection test successful\",\n    \"data\": {\n        \"provider\": \"beem\",\n        \"api_key_configured\": true,\n        \"secret_key_configured\": true,\n        \"connection_status\": \"success\"\n    }\n}"
						}
					]
				},
				{
					"name": "Get Beem Balance",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/balance/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"balance",
								""
							]
						},
						"description": "Get Beem account balance information"
					},
					"response": []
				},
				{
					"name": "Validate Phone Number",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"phone_number\": \"255700000001\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/validate-phone/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"validate-phone",
								""
							]
						},
						"description": "Validate phone number format for Beem SMS"
					},
					"response": [
						{
							"name": "Success Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"phone_number\": \"255700000001\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/messaging/sms/beem/validate-phone/",
									"host": ["{{base_url}}"],
									"path": ["api", "messaging", "sms", "beem", "validate-phone", ""]
								}
							},
							"status": "OK",
							"code": 200,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": true,\n    \"data\": {\n        \"phone_number\": \"255700000001\",\n        \"formatted\": \"255700000001\",\n        \"is_valid\": true,\n        \"provider\": \"beem\"\n    }\n}"
						}
					]
				},
				{
					"name": "Get SMS Statistics",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/stats/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"stats",
								""
							]
						},
						"description": "Get SMS usage statistics and metrics"
					},
					"response": []
				}
			],
			"description": "Utility endpoints for SMS functionality"
		},
		{
			"name": "SMS - Error Examples",
			"item": [
				{
					"name": "Send SMS - Missing Sender ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"Test message\",\n    \"recipients\": [\"255700000001\"]\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/send/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"send",
								""
							]
						},
						"description": "Example of error when sender_id is missing"
					},
					"response": [
						{
							"name": "Error Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"message\": \"Test message\",\n    \"recipients\": [\"255700000001\"]\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/messaging/sms/beem/send/",
									"host": ["{{base_url}}"],
									"path": ["api", "messaging", "sms", "beem", "send", ""]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": false,\n    \"message\": \"Sender ID is required\"\n}"
						}
					]
				},
				{
					"name": "Send SMS - Invalid Sender ID",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"Test message\",\n    \"recipients\": [\"255700000001\"],\n    \"sender_id\": \"INVALID\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/send/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"send",
								""
							]
						},
						"description": "Example of error when sender_id is not registered"
					},
					"response": [
						{
							"name": "Error Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"message\": \"Test message\",\n    \"recipients\": [\"255700000001\"],\n    \"sender_id\": \"INVALID\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/messaging/sms/beem/send/",
									"host": ["{{base_url}}"],
									"path": ["api", "messaging", "sms", "beem", "send", ""]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": false,\n    \"message\": \"Sender ID \\\"INVALID\\\" is not registered or not active\"\n}"
						}
					]
				},
				{
					"name": "Send SMS - Invalid Phone Number",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{access_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"Test message\",\n    \"recipients\": [\"invalid-phone\"],\n    \"sender_id\": \"MIFUMO\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/messaging/sms/beem/send/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"messaging",
								"sms",
								"beem",
								"send",
								""
							]
						},
						"description": "Example of error when phone number format is invalid"
					},
					"response": [
						{
							"name": "Error Response",
							"originalRequest": {
								"method": "POST",
								"header": [
									{
										"key": "Authorization",
										"value": "Bearer {{access_token}}"
									},
									{
										"key": "Content-Type",
										"value": "application/json"
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{\n    \"message\": \"Test message\",\n    \"recipients\": [\"invalid-phone\"],\n    \"sender_id\": \"MIFUMO\"\n}"
								},
								"url": {
									"raw": "{{base_url}}/api/messaging/sms/beem/send/",
									"host": ["{{base_url}}"],
									"path": ["api", "messaging", "sms", "beem", "send", ""]
								}
							},
							"status": "Bad Request",
							"code": 400,
							"_postman_previewlanguage": "json",
							"header": [
								{
									"key": "Content-Type",
									"value": "application/json"
								}
							],
							"cookie": [],
							"body": "{\n    \"success\": false,\n    \"message\": \"Validation error\",\n    \"errors\": {\n        \"recipients\": [\n            \"Invalid phone numbers: invalid-phone\"\n        ]\n    }\n}"
						}
					]
				}
			],
			"description": "Error handling examples and common error scenarios"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Auto-refresh token if needed",
					"if (pm.environment.get('token_expires_at') && new Date(pm.environment.get('token_expires_at')) < new Date()) {",
					"    pm.sendRequest({",
					"        url: pm.environment.get('base_url') + '/api/auth/token/refresh/',",
					"        method: 'POST',",
					"        header: {",
					"            'Content-Type': 'application/json'",
					"        },",
					"        body: {",
					"            mode: 'raw',",
					"            raw: JSON.stringify({",
					"                refresh: pm.environment.get('refresh_token')",
					"            })",
					"        }",
					"    }, function (err, response) {",
					"        if (response.json().access) {",
					"            pm.environment.set('access_token', response.json().access);",
					"            pm.environment.set('token_expires_at', new Date(Date.now() + 3600000).toISOString());",
					"        }",
					"    });",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "refresh_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "message_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "sender_id_uuid",
			"value": "",
			"type": "string"
		},
		{
			"key": "template_id",
			"value": "",
			"type": "string"
		}
	]
}
